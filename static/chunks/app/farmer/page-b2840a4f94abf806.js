(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{4441:function(e,t,a){Promise.resolve().then(a.bind(a,59))},8633:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return s}});var l=a(7437),n=a(5313);a(2265);var r=e=>(0,l.jsx)("div",{className:" flex justify-center items-center dark:bg-gray-800 shadow-lg rounded-full bg-white",children:(0,l.jsxs)("button",{onClick:e.onToggle,className:"h-10 w-10 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:[(0,l.jsx)("svg",{className:"fill-violet-700 block dark:hidden",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}),(0,l.jsx)("svg",{className:"fill-yellow-500 hidden dark:block",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","fill-rule":"evenodd","clip-rule":"evenodd"})})]})}),s=e=>{let t=(0,n.useRouter)();return(0,l.jsxs)("div",{className:"flex gap-2 w-full justify-center items-center p-2 variant-glass-surface rounded-b-2xl border border-[#2b334c] fixed top-0 left-0",children:[(0,l.jsxs)("div",{className:"btn-group variant-filled",children:[(0,l.jsx)("button",{onClick:()=>t.push("/farmer"),children:"Farmers"}),(0,l.jsx)("button",{onClick:()=>t.push("/farm"),children:"Farms"}),(0,l.jsx)("button",{onClick:()=>t.push("/schedule"),children:"Schedules"})]}),(0,l.jsx)(r,{onToggle:()=>{var e;null===(e=document.querySelector("html"))||void 0===e||e.classList.toggle("dark")}})]})}},59:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var l=a(7437),n=a(2265),r=a(8633),s=a(784),i=e=>{let[t,a]=(0,n.useState)(""),[r,s]=(0,n.useState)(""),[i,c]=(0,n.useState)("");return e.show?(0,l.jsx)("div",{className:" z-50 fixed w-full h-full top-0 left-0 variant-glass-surface flex items-center justify-center",children:(0,l.jsxs)("div",{className:"card p-4",children:[(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Name"}),(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Name",onChange:e=>a(e.target.value)})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Phone"}),(0,l.jsx)("input",{className:"input",type:"number",placeholder:"Phone",onChange:e=>s(e.target.value)})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Language"}),(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Language",onChange:e=>c(e.target.value)})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,l.jsx)("button",{type:"button",className:"btn variant-ringed",onClick:e.onClose,children:"Cancel"}),(0,l.jsx)("button",{type:"button",className:"btn variant-filled",onClick:()=>{if(!t||!r||!i){alert("All fields are required");return}fetch("http://20.244.40.42:3000/addFarmer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,phoneNumber:r,language:i})}).then(e=>e.json()).then(t=>{t.id?(alert("Farmer added successfully"),e.onClose(),e.onSave()):console.error("Error:",t.error)}).catch(e=>console.error("Error:",e))},children:"Save"})]})]})}):null},c=e=>{let[t,a]=(0,n.useState)(0),[r,s]=(0,n.useState)(""),[i,c]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[u,h]=(0,n.useState)("");return e.show?(0,l.jsx)("div",{className:" z-50 fixed w-full h-full top-0 left-0 variant-glass-surface flex items-center justify-center",children:(0,l.jsxs)("div",{className:"card p-4",children:[(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Crop Grown"}),(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Crop Grown",onChange:e=>c(e.target.value)})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Sowing Date"}),(0,l.jsx)("input",{className:"input",type:"date",placeholder:"Sowing Date",onChange:e=>d(e.target.value)})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Area"}),(0,l.jsx)("input",{className:"input",type:"number",placeholder:"Area",onChange:e=>a(parseFloat(e.target.value))})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Village"}),(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Village",onChange:e=>s(e.target.value)})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Country"}),(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Country",onChange:e=>h(e.target.value)})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,l.jsx)("button",{type:"button",className:"btn variant-ringed",onClick:e.onClose,children:"Cancel"}),(0,l.jsx)("button",{type:"button",className:"btn variant-filled",onClick:()=>{if(!t||!r||!u){alert("All fields are required");return}fetch("http://20.244.40.42:3000/addFarm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({area:t,village:r,cropGrown:i,country:u,farmerId:e.farmerId,...""!==o?{sowingDate:o}:{}})}).then(e=>e.json()).then(t=>{t.id?(alert("Farm added successfully"),e.onClose()):console.error("Error:",t.error)}).catch(e=>console.error("Error:",e))},children:"Save"})]})]})}):null},o=e=>{let[t,a]=(0,n.useState)(""),[r,s]=(0,n.useState)(""),[i,c]=(0,n.useState)("");return((0,n.useEffect)(()=>{e.data.name&&e.data.phoneNumber&&e.data.language&&(a(e.data.name),s(e.data.phoneNumber),c(e.data.language))},[e.data.name,e.data.phoneNumber,e.data.language]),e.show)?(0,l.jsx)("div",{className:" z-50 fixed w-full h-full top-0 left-0 variant-glass-surface flex items-center justify-center",children:(0,l.jsxs)("div",{className:"card p-4",children:[(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Name"}),(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Name",value:t,onChange:e=>a(e.target.value)})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Phone"}),(0,l.jsx)("input",{className:"input",type:"number",placeholder:"Phone",value:r,onChange:e=>s(e.target.value)})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Language"}),(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Language",value:i,onChange:e=>c(e.target.value)})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,l.jsx)("button",{type:"button",className:"btn variant-ringed",onClick:e.onClose,children:"Cancel"}),(0,l.jsx)("button",{type:"button",className:"btn variant-filled",onClick:()=>{if(!t||!r||!i){alert("All fields are required");return}fetch("http://20.244.40.42:3000/updateFarmer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,phoneNumber:r,language:i,id:e.data.id})}).then(e=>e.json()).then(t=>{t.id?(alert("Farmer updated successfully"),e.onClose(),e.onSave()):console.error("Error:",t.error)}).catch(e=>console.error("Error:",e))},children:"Save"})]})]})}):null},d=e=>{let[t,a]=(0,n.useState)(""),[r,i]=(0,n.useState)(0),[c,o]=(0,n.useState)("ton");return(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Fertiliser Name"}),(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Fertiliser Name",onChange:t=>{a(t.target.value),e.onChange(t.target.value,r,c)}})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Price"}),(0,l.jsx)("input",{className:"input",type:"number",placeholder:"Price",onChange:a=>{i(Number(a.target.value)),e.onChange(t,Number(a.target.value),c)}})]}),(0,l.jsxs)("label",{className:"label mt-2",children:[(0,l.jsx)("span",{children:"Unit"}),(0,l.jsxs)("select",{className:"input",onChange:a=>{o(a.target.value),e.onChange(t,r,a.target.value)},children:[(0,l.jsx)("option",{value:"ton",children:"ton"}),(0,l.jsx)("option",{value:"kg",children:"kg"}),(0,l.jsx)("option",{value:"g",children:"g"}),(0,l.jsx)("option",{value:"L",children:"L"}),(0,l.jsx)("option",{value:"ml",children:"ml"})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"button",className:"btn variant-filled mt-10",onClick:e.onDelete,children:(0,l.jsx)("span",{children:(0,l.jsx)(s.ZkW,{})})})})]})},u=e=>{let[t,a]=(0,n.useState)([]);if(!e.show)return null;let r=(e,t,l,n)=>{a(a=>{let r=[...a],s=r.findIndex(t=>t.id===e);return r[s]={id:e,name:t,price:l,unit:n},r})},i=e=>{a(t=>t.filter(t=>t.id!==e))};return(0,l.jsx)("div",{className:" z-50 fixed w-full h-full top-0 left-0 variant-glass-surface flex items-center justify-center",children:(0,l.jsxs)("div",{className:"card p-4",children:[(0,l.jsx)("div",{className:"max-h-80 overflow-auto",children:t.map(e=>(0,l.jsx)(d,{onChange:(t,a,l)=>r(e.id,t,a,l),onDelete:()=>i(e.id)},e.id))}),(0,l.jsxs)("button",{type:"button",className:"btn variant-filled mt-2",onClick:()=>{a([...t,{id:Date.now(),name:"",price:0,unit:"ton"}])},children:[(0,l.jsx)("span",{children:(0,l.jsx)(s.x06,{})}),(0,l.jsx)("span",{children:"Add Fertiliser"})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,l.jsx)("button",{type:"button",className:"btn variant-ringed",onClick:e.onClose,children:"Close"}),(0,l.jsx)("button",{type:"button",className:"btn variant-filled",onClick:()=>{t.length||alert("Add fertilisers to calculate bill");let a=Object.fromEntries(t.map(e=>[e.name,{price:e.price,unit:e.unit}]));fetch("http://20.244.40.42:3000/calculateBill",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({farmerId:e.farmerId,fertiliserPrices:a})}).then(e=>e.json()).then(e=>{null!=e.totalCost?alert("Total cost: ".concat(e.totalCost)):alert(e.error)}).catch(e=>console.error("Error:",e))},children:"Calculate"})]})]})})},h=e=>{let[t,a]=(0,n.useState)({}),[d,h]=(0,n.useState)(""),[m,p]=(0,n.useState)(!1),[j,x]=(0,n.useState)(!1),[f,b]=(0,n.useState)(!1),[g,v]=(0,n.useState)({}),[y,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{C()},[]);let C=()=>{fetch("http://20.244.40.42:3000/getFarmers",{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>a(e)).catch(e=>console.error("Error:",e))},w=e=>{window.confirm("Are you sure you want to delete this farmer? It will delete all farms and schedules associated with it!")&&fetch("http://20.244.40.42:3000/removeFarmer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(e=>e.json()).then(e=>{e.id?(alert("Farmer deleted successfully"),C()):console.error("Error:",e.error)}).catch(e=>console.error("Error:",e))},S=()=>{fetch("http://20.244.40.42:3000/getFarmersGrowingCrop",{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>a(e)).catch(e=>console.error("Error:",e))};return(0,l.jsxs)("main",{className:"w-screen",children:[(0,l.jsx)(i,{show:m,onClose:()=>p(!1),onSave:C}),(0,l.jsx)(c,{show:j,onClose:()=>x(!1),farmerId:d}),(0,l.jsx)(o,{show:f,data:g,onClose:()=>b(!1),onSave:C}),(0,l.jsx)(u,{show:y,farmerId:d,onClose:()=>N(!1)}),(0,l.jsx)(r.default,{}),(0,l.jsxs)("div",{className:"w-screen max-h-[90%] flex p-4 flex-col items-center mt-16 ",children:[(0,l.jsxs)("button",{type:"button",className:"btn variant-filled mb-4",onClick:()=>p(!0),children:[(0,l.jsx)("span",{children:(0,l.jsx)(s.x06,{})}),(0,l.jsx)("span",{children:"Add"})]}),(0,l.jsxs)("label",{className:"flex items-center space-x-2 mb-4",children:[(0,l.jsx)("input",{className:"checkbox",type:"checkbox",onClick:e=>{e.currentTarget.checked?S():C()}}),(0,l.jsx)("p",{children:"Farmers growing crops"})]}),(0,l.jsx)("div",{className:"table-container border border-[#2b334c] ",children:(0,l.jsxs)("table",{className:"table table-hover",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"#"}),(0,l.jsx)("td",{children:"Farmer ID"}),(0,l.jsx)("td",{children:"Name"}),(0,l.jsx)("td",{children:"Phone"}),(0,l.jsx)("td",{children:"Language"}),(0,l.jsx)("td",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:Object.values(t).map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:t+1}),(0,l.jsx)("td",{children:e.id}),(0,l.jsx)("td",{children:e.name}),(0,l.jsx)("td",{children:e.phoneNumber}),(0,l.jsx)("td",{children:e.language}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{type:"button",className:"btn-icon variant-filled-secondary btn-sm",onClick:()=>{v(e),b(!0)},children:(0,l.jsx)(s.zmo,{})}),(0,l.jsx)("button",{type:"button",className:"btn-icon variant-filled-primary btn-sm",onClick:()=>w(e.id),children:(0,l.jsx)(s.ZkW,{})}),(0,l.jsxs)("button",{type:"button",className:"btn variant-filled-success",onClick:()=>{h(e.id),x(!0)},children:[(0,l.jsx)("span",{children:(0,l.jsx)(s.x06,{})}),(0,l.jsx)("span",{children:"Farm"})]}),(0,l.jsxs)("button",{type:"button",className:"btn variant-filled-surface",onClick:()=>{h(e.id),N(!0)},children:[(0,l.jsx)("span",{children:(0,l.jsx)(s.OTf,{})}),(0,l.jsx)("span",{children:"Bill"})]})]})})]},t))})]})})]})]})}},158:function(e,t,a){"use strict";a.d(t,{w_:function(){return d}});var l=a(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=l.createContext&&l.createContext(n),s=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){var l,n;l=t,n=a[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(l))in e?Object.defineProperty(e,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[l]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>l.createElement(u,i({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,a)=>l.createElement(t.tag,o({key:a},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var a,{attr:n,size:r,title:c}=e,d=function(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,s),u=r||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),l.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:a,style:o(o({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&l.createElement("title",null,c),e.children)};return void 0!==r?l.createElement(r.Consumer,null,e=>t(e)):t(n)}}},function(e){e.O(0,[51,971,69,744],function(){return e(e.s=4441)}),_N_E=e.O()}]);